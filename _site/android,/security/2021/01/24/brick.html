<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.2.6
    Copyright 2016-2020 Sylhare
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Androbin Dev Blog" href="http://localhost:4000/feed.xml"/>
    
    

    <!-- KaTeX 0.12.0 -->
    <!-- if you have any issue check https://github.com/KaTeX/KaTeX -->
    
    <script defer src="/assets/js/vendor/katex.min.js"></script>
    <script defer src="/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-http://localhost:4000';
      const isCookieConsent = 'false';
      const analyticsName = 'G-4LEXR2XSMS';
    </script>

    
    
        <!-- Global site tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4LEXR2XSMS"></script>
        <!-- Page analysis (analytics.js) -->
        <script async src='https://www.google-analytics.com/analytics.js'></script>
    

    <!-- seo tags -->
    <meta property="og:image" content="http://localhost:4000/assets/img/post/20210124_thumb.png">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>ì½”ë“œ í•œì¤„ë¡œ ì•ˆë“œë¡œì´ë“œ SharedPreferenceë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë°©ë²• | Androbin Dev Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="ì½”ë“œ í•œì¤„ë¡œ ì•ˆë“œë¡œì´ë“œ SharedPreferenceë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë°©ë²•" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ì•ˆë“œë¡œì´ë“œ SharedPreferences ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•˜ì—¬ ë³´ì•ˆ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ì§€í‚¤ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤." />
<meta property="og:description" content="ì•ˆë“œë¡œì´ë“œ SharedPreferences ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•˜ì—¬ ë³´ì•ˆ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ì§€í‚¤ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤." />
<link rel="canonical" href="http://localhost:4000/android,/security/2021/01/24/brick.html" />
<meta property="og:url" content="http://localhost:4000/android,/security/2021/01/24/brick.html" />
<meta property="og:site_name" content="Androbin Dev Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-24T12:42:00+09:00" />
<script type="application/ld+json">
{"datePublished":"2021-01-24T12:42:00+09:00","dateModified":"2021-01-24T12:42:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/android,/security/2021/01/24/brick.html"},"url":"http://localhost:4000/android,/security/2021/01/24/brick.html","description":"ì•ˆë“œë¡œì´ë“œ SharedPreferences ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•˜ì—¬ ë³´ì•ˆ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ì§€í‚¤ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.","@type":"BlogPosting","headline":"ì½”ë“œ í•œì¤„ë¡œ ì•ˆë“œë¡œì´ë“œ SharedPreferenceë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë°©ë²•","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Androbin Dev Blog" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="ì½”ë“œ í•œì¤„ë¡œ ì•ˆë“œë¡œì´ë“œ SharedPreferenceë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë°©ë²•">
    <meta name="twitter:description" content="  ë‹¹ì‹ ì˜ ì•ˆë“œë¡œì´ë“œ ì•± ë°ì´í„°ëŠ” ì•ˆì „í•œê°€ìš”?ğŸ” ë°ì´í„°ë¥¼ ì €ì¥í•  ë• ë°˜ë“œì‹œ ì•”í˜¸í™”ê°€ í•„ìš”í•©ë‹ˆë‹¤.KISAì˜ ê°œì¸ì •ë³´ ì•ˆì „ì„± í™•ë³´ì¡°ì¹˜ ê¸°ì¤€ì— ë”°ë¥´ë©´ ì£¼ë¯¼ë²ˆí˜¸ë‚˜ ë¹„ë°€ë²ˆí˜¸ì™€ ê°™ì€ ê°œì¸ ì •ë³´ë¥¼ ëª¨ë°”ì¼ ë‹¨ë§ì— ì €ì¥í•  ë•ŒëŠ” ë°˜ë“œì‹œ ëª¨ë‘ ì•”í˜¸í™” í•´ì•¼í•©ë‹ˆë‹¤.ë§Œì•½ ë³´ì•ˆì— ë¯¼ê°í•œ ì„œë¹„ìŠ¤ë¼ì„œ ëª¨ë°”ì¼ ë³´...">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://localhost:4000/assets/img/post/20210124_thumb.png">
    <meta name="twitter:image:alt" content="ì½”ë“œ í•œì¤„ë¡œ ì•ˆë“œë¡œì´ë“œ SharedPreferenceë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë°©ë²•">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
		<a href="/">
			<img alt="logo img" class="avatar" src="/assets/img/avatar.png" />
		</a>
        
        <a class="site-title" aria-label="Androbin Dev Blog" href="/">
        Androbin Dev Blog
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        

        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="About Me" title="About Me" href="/about/">
                     About Me 
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Search" title="Search" href="/search/">
                     <i class="fa fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Tags" title="Tags" href="/tags/">
                     <i class="fa fa-tags" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
    </ul>

	</nav>
</header>

    <div class="content">
      <article class="feature-image" >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="%EC%BD%94%EB%93%9C+%ED%95%9C%EC%A4%84%EB%A1%9C+%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C+SharedPreference%EB%A5%BC+%EC%95%94%ED%98%B8%ED%99%94%ED%95%98%EB%8A%94+%EB%B0%A9%EB%B2%95" class="title">ì½”ë“œ í•œì¤„ë¡œ ì•ˆë“œë¡œì´ë“œ SharedPreferenceë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë°©ë²•</h1>
      


<div class="post-info">
    <p class="meta">
      January 24, 2021
    </p></div>

      
    </div>
  </header>

  <section class="post-content">
  
      <blockquote>
  <p>ë‹¹ì‹ ì˜ ì•ˆë“œë¡œì´ë“œ ì•± ë°ì´í„°ëŠ” ì•ˆì „í•œê°€ìš”?</p>
</blockquote>

<h1 id="-ë°ì´í„°ë¥¼-ì €ì¥í• -ë•-ë°˜ë“œì‹œ-ì•”í˜¸í™”ê°€-í•„ìš”í•©ë‹ˆë‹¤">ğŸ” ë°ì´í„°ë¥¼ ì €ì¥í•  ë• ë°˜ë“œì‹œ ì•”í˜¸í™”ê°€ í•„ìš”í•©ë‹ˆë‹¤.</h1>

<p><img src="/assets/img/post/20210124_01.jpeg" alt="security" /></p>

<p><a href="https://www.kisa.or.kr/public/laws/laws3_View.jsp?cPage=1&amp;mode=view&amp;p_No=259&amp;b_No=259&amp;d_No=101&amp;ST=T&amp;SV=">KISAì˜ ê°œì¸ì •ë³´ ì•ˆì „ì„± í™•ë³´ì¡°ì¹˜ ê¸°ì¤€</a>ì— ë”°ë¥´ë©´ <br />
ì£¼ë¯¼ë²ˆí˜¸ë‚˜ ë¹„ë°€ë²ˆí˜¸ì™€ ê°™ì€ ê°œì¸ ì •ë³´ë¥¼ ëª¨ë°”ì¼ ë‹¨ë§ì— ì €ì¥í•  ë•ŒëŠ” ë°˜ë“œì‹œ ëª¨ë‘ ì•”í˜¸í™” í•´ì•¼í•©ë‹ˆë‹¤.<br />
<br />
ë§Œì•½ ë³´ì•ˆì— ë¯¼ê°í•œ ì„œë¹„ìŠ¤ë¼ì„œ ëª¨ë°”ì¼ ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬ë¥¼ ë°›ëŠ”ë‹¤ë©´<br />
ìœ„ì— ì„œìˆ ëœ ë¯¼ê°í•œ ì •ë³´ ë¿ ì•„ë‹ˆë¼ ì „í™”ë²ˆí˜¸, ìƒë…„ì›”ì¼, ì´ë¦„ ë“±ì„ í¬í•¨í•œ<br />
ì‚¬ì‹¤ìƒ ê±°ì˜ ëª¨ë“  ì •ë³´ë¥¼ ì•”í˜¸í™” í•´ì•¼í•©ë‹ˆë‹¤.<br /></p>

<p>ë”°ë¼ì„œ ë‹¨ë§ì— ì €ì¥í•˜ëŠ” ë°ì´í„°ëŠ” <strong>ì „ë¶€ ì•”í˜¸í™”</strong>í•˜ëŠ” ê²ƒì´ ì •ì‹ ê±´ê°•ì— ì´ë¡­ìŠµë‹ˆë‹¤.<br />
ì• ì´ˆë¶€í„° ì•”í˜¸í™” í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ë©´ ë”ë”ìš± ì¢‹êµ¬ìš” ğŸ‘<br />
<br /></p>

<h1 id="ï¸-encryptedsharedpreferences">ğŸ‘®â€â™‚ï¸ EncryptedSharedPreferences</h1>

<p><img src="/assets/img/post/20210124_jetpack.png" alt="jetpack" /></p>

<p>Android Jetpackì— í¬í•¨ëœ <a href="https://developer.android.com/reference/androidx/security/crypto/EncryptedSharedPreferences">EncryptedSharedPreferences</a>ë¥¼ ì´ìš©í•˜ë©´<br />
ë³µì¡í•œ êµ¬í˜„ ì—†ì´ë„ ì†ì‰½ê²Œ <strong>SharedPreferences ë°ì´í„°ë¥¼ ì•”í˜¸í™”</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <br />
<del>ê°“ë“œë¡œì´ë“œí‚¹íŠ¸íŒ©</del><br />
<br />
ë¹„ë¡ ì•ŒíŒŒë²„ì „ì´ë‚˜ ì‚¬ì‹¤ìƒ êµ¬ê¸€ ê³µì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ì„œ ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆê³ <br />
ê¸°ì¡´ì˜ SharedPreferencesë¥¼ ìƒì†ë°›ê³  ìˆì–´ì„œ ì²˜ìŒ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ë©´<br />
ì´í›„ì— ë°ì´í„°ë¥¼ ì½ê³  ì“°ëŠ” ê³¼ì •ì—ì„œì˜ ìˆ˜ì •ì€ ì•„ì˜ˆ ì—†ê¸° ë–„ë¬¸ì— ë¬´ì²™ í¸ë¦¬í•©ë‹ˆë‹¤.<br />
<br />
ì‹¤ì œë¡œ ì‚¬ìš©í•´ë³´ë©´ í‚¤ê°’ê³¼ ë°ì´í„°ê°€ ëª¨ë‘ ì•”í˜¸í™” ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
<br />
ê·¸ëŸ¼ í•œë²ˆ ì§ì ‘ ì ìš©í•´ë³¼ê¹Œìš”?<br /></p>

<p><br /><br /></p>

<h2 id="1-buildgradleappì—-ì˜ì¡´ì„±-ì¶”ê°€">1. build.gradle(app)ì— ì˜ì¡´ì„± ì¶”ê°€</h2>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">implementation</span> <span class="s1">'androidx.security:security-crypto:1.0.0-alpha02'</span>
<span class="o">}</span>
</code></pre></div></div>

<p>app ìˆ˜ì¤€ì˜ <code class="language-plaintext highlighter-rouge">build.gradle</code> ì˜ dependenciesì— ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤.<br /></p>

<h2 id="2-ì½”ë“œìƒì—ì„œ-encryptedsharedpreferencesë¥¼-í˜¸ì¶œí•˜ê¸°">2. ì½”ë“œìƒì—ì„œ EncryptedSharedPreferencesë¥¼ í˜¸ì¶œí•˜ê¸°</h2>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">val</span> <span class="py">masterKeyAlias</span> <span class="p">=</span> <span class="nc">MasterKeys</span><span class="p">.</span><span class="nf">getOrCreate</span><span class="p">(</span><span class="nc">MasterKeys</span><span class="p">.</span><span class="nc">AES256_GCM_SPEC</span><span class="p">)</span>

  <span class="kd">val</span> <span class="py">sharedPreferences</span> <span class="p">=</span> <span class="nc">EncryptedSharedPreferences</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>
      <span class="s">"secret_shared_prefs"</span><span class="p">,</span> <span class="c1">// íŒŒì¼ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</span>
      <span class="n">masterKeyAlias</span><span class="p">,</span>
      <span class="n">context</span><span class="p">,</span>
      <span class="nc">EncryptedSharedPreferences</span><span class="p">.</span><span class="nc">PrefKeyEncryptionScheme</span><span class="p">.</span><span class="nc">AES256_SIV</span><span class="p">,</span>
      <span class="nc">EncryptedSharedPreferences</span><span class="p">.</span><span class="nc">PrefValueEncryptionScheme</span><span class="p">.</span><span class="nc">AES256_GCM</span>
  <span class="p">)</span>

  <span class="kd">val</span> <span class="py">editor</span><span class="p">:</span> <span class="nc">SharedPreferences</span><span class="p">.</span><span class="nc">Editor</span> <span class="p">=</span> <span class="n">sharedPreferences</span><span class="p">.</span><span class="nf">edit</span><span class="p">()</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">EncryptedSharedPreferences</code>ê°€ ì´ë¯¸ SharedPreferences ì´ë¯€ë¡œ ì´í›„ì—ëŠ” <br />
ê¸°ì¡´ì— ì‰ì–´ë“œí”„ë¦¬í¼ëŸ°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë˜ ê³³ì—ì„œ ë°ì´í„°ë¥¼ ì½ê³  ì“°ëŠ” ì½”ë“œëŠ” ë™ì¼í•˜ë¯€ë¡œ<br />
ë³„ë„ì˜ ì½”ë“œ ìˆ˜ì • ì—†ì´ ê¸°ì¡´ì— ì‚¬ìš©í•˜ì‹œë˜ ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.<br /><br />
<br /></p>

<h1 id="-ê·¸ëŸ°ë°-ë§ì…ë‹ˆë‹¤">ğŸ¤” ê·¸ëŸ°ë° ë§ì…ë‹ˆë‹¤</h1>

<p><code class="language-plaintext highlighter-rouge">EncryptedSharedPreferences</code>ë¥¼ ì ìš©í•˜ê³ ë‚˜ì„œ ì €ì¥í•œ ëª¨ë“  ë°ì´í„°ëŠ” ì•”í˜¸í™” ë˜ê² ì§€ë§Œ<br />
ì´ë¯¸ í‰ë¬¸ìœ¼ë¡œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•´ì£¼ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤ ğŸ˜­<br /></p>

<p>ê·¸ë¦¬ê³  ì•ˆíƒ€ê¹ê²Œë„ ë³´í†µ ì´ ê¸€ì„ ì½ê³  ê³„ì‹ ë¶„ì´ë¼ë©´ <br />
ì´ë¯¸ ë°°í¬ë˜ì–´ ì‚¬ìš©ì ë‹¨ë§ì— ì €ì¥ëœ ë°ì´í„°ì˜ ì•”í˜¸í™”ê°€ í•„ìš”í•˜ì‹  ë¶„ë“¤ì´ ë§ìœ¼ì‹¤ ê²ƒ ê°™ìŠµë‹ˆë‹¤.<br />
<br />
ì´ë¯¸ ë°°í¬ëœ ì•±ì´ë¼ì„œ ì‚¬ìš©ìê°€ ë°ì´í„°ë¥¼ í‰ë¬¸ìœ¼ë¡œ ì €ì¥í•˜ê³  ìˆë‹¤ë©´<br />
ì´ <strong>ì €ì¥ëœ ë°ì´í„°ë¥¼ ì „ë¶€ ì•”í˜¸í™” í•˜ëŠ” ì´ê´€ì‘ì—…</strong>ì´ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.<br />
<br /><br />
ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì´ ìˆì„ ìˆ˜ ìˆê² ì§€ë§Œ ì´ ê¸€ì—ì„œëŠ” ê°€ì¥ ê°„ë‹¨í•œ</p>

<ol>
  <li>ê¸°ì¡´ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³ </li>
  <li>ìƒˆë¡œìš´ íŒŒì¼ì— ì•”í˜¸í™” í•´ì„œ ë³µì‚¬</li>
</ol>

<p>í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br />
<br />
<br /></p>

<h2 id="-ê¸°ì¡´-ë°ì´í„°-ì´ê´€í•˜ê¸°">ğŸ“¨ ê¸°ì¡´ ë°ì´í„° ì´ê´€í•˜ê¸°</h2>

<p>ê¸°ì¡´ì— ì´ë¯¸ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•˜ëŠ” ë¬¸ì œëŠ” ë˜ ë³„ê°œì˜ ë¬¸ì œì…ë‹ˆë‹¤<br />
<br />
ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ê¸°ì¡´ì˜ ë°ì´í„°ë¥¼ ì „ë¶€ ì•”í˜¸í™”í•˜ì—¬ ë³µì‚¬í•˜ê³  ê¸°ì¡´ì˜ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì—¬ <br />
ë¬´ì¡°ê±´ ì•”í˜¸í™” ëœ ë°ì´í„°ë§Œ ì ‘ê·¼í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.<br />
<br /></p>

<blockquote>
  <p>âš ï¸ ë³µì‚¬í•˜ê³  ê¸°ì¡´ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ì‹ì´ë¯€ë¡œ ì•”í˜¸í™” í•  íŒŒì¼ì´ë¦„ê³¼ ê¸°ì¡´ íŒŒì¼ì´ë¦„ì€ ë‹¬ë¼ì•¼ í•©ë‹ˆë‹¤.</p>
</blockquote>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì•”í˜¸í™” ë˜ì§€ ì•Šì€ ë ˆê±°ì‹œ ë°ì´í„°</span>
<span class="kd">val</span> <span class="py">legacy</span> <span class="p">=</span> <span class="nc">SharedPreferences</span> <span class="k">by</span> <span class="n">mContext</span><span class="p">.</span><span class="nf">getSharedPreferences</span><span class="p">(</span><span class="n">mFile</span><span class="p">,</span> <span class="nc">Context</span><span class="p">.</span><span class="nc">MODE_PRIVATE</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">entries</span> <span class="p">=</span> <span class="n">legacy</span><span class="p">.</span><span class="n">all</span><span class="p">.</span><span class="n">entries</span>

<span class="c1">// ëª¨ë“  ë°ì´í„°ë¥¼ ë³µì‚¬í•œë‹¤.</span>
<span class="c1">// editorëŠ” EncryptedSharedPreferencesì˜ editor </span>
<span class="n">entries</span><span class="p">.</span><span class="nf">forEach</span> <span class="p">{</span>
    <span class="k">when</span> <span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">String</span> <span class="p">-&gt;</span> <span class="n">editor</span><span class="p">.</span><span class="nf">putString</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span> <span class="k">as</span> <span class="nc">String</span><span class="p">).</span><span class="nf">apply</span><span class="p">()</span>
        <span class="k">is</span> <span class="nc">Long</span> <span class="p">-&gt;</span> <span class="n">editor</span><span class="p">.</span><span class="nf">putLong</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span> <span class="k">as</span> <span class="nc">Long</span><span class="p">).</span><span class="nf">apply</span><span class="p">()</span>
        <span class="k">is</span> <span class="nc">Int</span> <span class="p">-&gt;</span> <span class="n">editor</span><span class="p">.</span><span class="nf">putInt</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span> <span class="k">as</span> <span class="nc">Int</span><span class="p">).</span><span class="nf">apply</span><span class="p">()</span>
        <span class="k">is</span> <span class="nc">Float</span> <span class="p">-&gt;</span> <span class="n">editor</span><span class="p">.</span><span class="nf">putFloat</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span> <span class="k">as</span> <span class="nc">Float</span><span class="p">).</span><span class="nf">apply</span><span class="p">()</span>
        <span class="k">is</span> <span class="nc">Boolean</span> <span class="p">-&gt;</span> <span class="n">editor</span><span class="p">.</span><span class="nf">putBoolean</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span> <span class="k">as</span> <span class="nc">Boolean</span><span class="p">).</span><span class="nf">apply</span><span class="p">()</span>
        <span class="k">is</span> <span class="nc">Set</span><span class="p">&lt;</span><span class="err">*</span><span class="p">&gt;</span> <span class="p">-&gt;</span> <span class="n">editor</span><span class="p">.</span><span class="nf">putStringSet</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span> <span class="k">as</span> <span class="nc">Set</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;).</span><span class="nf">apply</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ë³µì‚¬ë¥¼ ë‹¤í–ˆë‹¤ë©´ ê¸°ì¡´ì˜ í‰ë¬¸ ë°ì´í„°ë¥¼ ì „ë¶€ ì§€ì›Œë²„ë¦½ì‹œë‹¤.<br /></p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">legacy</span><span class="p">.</span><span class="nf">edit</span><span class="p">().</span><span class="nf">clear</span><span class="p">().</span><span class="nf">apply</span><span class="p">()</span>
</code></pre></div></div>

<p><br /><br /><br /></p>

<h2 id="ê·¸ëŸ°ë°-ì ê¹-ìµœì†Œì§€ì›ì´-api23-ì´ë¼êµ¬ìš”---">ê·¸ëŸ°ë° ì ê¹, ìµœì†Œì§€ì›ì´ api23 ì´ë¼êµ¬ìš”? ğŸ˜± ğŸ˜± ğŸ˜±</h2>

<p><img src="/assets/img/post/20210124_no.gif" alt="no_please_no" /></p>

<p>ë„¤ ê·¸ë ‡ìŠµë‹ˆë‹¤. <br />
ë§ˆì‹œë©œë¡œì´í•˜ëŠ” ì´ ë°©ë²•ìœ¼ë¡œëŠ” í•  ìˆ˜ ê°€ ì—†ê¸° ë•Œë¬¸ì—<br />
ê²°êµ­ ìƒˆë¡œìš´ ì•”í˜¸í™” ëª¨ë“ˆì„ ë§Œë“¤ì–´ì„œ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.ğŸ˜±<br /><br /></p>

<p>ë¬¸ì œëŠ” ì•„ì§ê¹Œì§€ë„ ë§ì€ ì•±ë“¤ì˜ 23ë¯¸ë§Œì˜ ì•±ì„ ì§€ì›í•˜ê³  ìˆê¸° ë•Œë¬¸ì—<br />
ê¸°ê» EncryptedSharedPreferencesê°€ ìˆì–´ë„ í™œìš©í•˜ê¸°ê°€ ì–´ë µë‹¤ëŠ” ì ì´ ê°€ì¥ í° ë¬¸ì œì…ë‹ˆë‹¤.<br /><br /></p>

<h2 id="ï¸-ê·¸ëŸ¼-ì´ì œ-ì–´ë–¡í•˜ì£ ">ğŸ¤·â€â™‚ï¸ ê·¸ëŸ¼ ì´ì œ ì–´ë–¡í•˜ì£ ?</h2>

<p>ì•„ì§ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. <br /></p>

<p><a href="https://github.com/HaenaraShin/BrickSharedPreference">BrickSharedPreferences</a>ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”!<br /><br /></p>

<h1 id="bricksharedpreferencesê°€-ë­”ë°">BrickSharedPreferencesê°€ ë­”ë°?</h1>

<p><img src="/assets/img/post/20210124_brick.png" alt="BrickSharedPreferences" /></p>

<p><br /></p>

<h4 id="api-ë ˆë²¨-ìƒê´€-ì—†ì´-sharedpreferencesë¥¼-ì•”í˜¸í™”í•´ì£¼ëŠ”-ë¼ì´ë¸ŒëŸ¬ë¦¬-ì…ë‹ˆë‹¤">Api ë ˆë²¨ ìƒê´€ ì—†ì´ SharedPreferencesë¥¼ ì•”í˜¸í™”í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.</h4>

<p>minSdk 14ë¡œ ë‚®ì€ ë ˆë²¨ê¹Œì§€ ì§€ì›í•˜ë©°<br />
23 ì´ìƒì´ë¼ë©´ ì œíŠ¸íŒ©ì˜ EncryptedSharedPreferencesë¥¼ ì‚¬ìš©í•˜ê³ <br />
23 ë¯¸ë§Œì´ë¼ë©´ ì»¤ìŠ¤í…€ ì•”í˜¸í™” SharedPreferencesë¥¼ ì´ìš©í•˜ëŠ” ë³´ì•ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.<br /></p>

<p>ë˜í•œ ì¶”ê°€ë¡œ ìœ„ì—ì„œ ì„¤ëª…í•œ â€˜ê¸°ì¡´ ë°ì´í„° ì´ê´€â€™ì„ <strong>ë‹¨ í•œì¤„ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong><br /><br /></p>

<h2 id="1-buildgradleappì—-ì˜ì¡´ì„±-ì¶”ê°€-1">1. build.gradle(app)ì— ì˜ì¡´ì„± ì¶”ê°€</h2>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">dependencies</span> <span class="p">{</span>
    <span class="n">implementation</span> <span class="err">'</span><span class="n">dev</span><span class="p">.</span><span class="n">haenara</span><span class="p">:</span><span class="n">bricksharedpref</span><span class="p">:</span><span class="mf">1.0.2</span><span class="err">'</span>
    <span class="n">implementation</span> <span class="err">'</span><span class="n">androidx</span><span class="p">.</span><span class="n">security</span><span class="p">:</span><span class="n">security-crypto</span><span class="p">:</span><span class="mf">1.0.0</span><span class="p">-</span><span class="n">alpha02</span><span class="err">'</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="2-ì½”ë“œìƒì—ì„œ-bricksharedpreferencesë¥¼-í˜¸ì¶œí•˜ê¸°">2. ì½”ë“œìƒì—ì„œ BrickSharedPreferencesë¥¼ í˜¸ì¶œí•˜ê¸°</h2>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ê¸°ì¡´ SharedPreferencesë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì— "Brick"ë§Œ ì•ì— ë¶™ì´ë©´ ëœë‹¤. </span>
<span class="kd">val</span> <span class="py">mSharedPreferences</span> <span class="p">=</span> <span class="nf">getBrickSharedPreferences</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="nc">Context</span><span class="p">.</span><span class="nc">MODE_PRIVATE</span><span class="p">)</span>
</code></pre></div></div>

<p>ê¸°ì¡´ì— ì‰ì–´ë“œí”„ë¦¬í¼ëŸ°ìŠ¤ í˜¸ì¶œ ì‹œì— ì½”í‹€ë¦°ì—ì„œ ì‚¬ìš©í•˜ë˜ ì½”ë“œì™€ ê±°ì˜ ìœ ì‚¬í•œë°, <br />
<code class="language-plaintext highlighter-rouge">getSharedPreferences</code>ë¥¼<br /> 
<code class="language-plaintext highlighter-rouge">getBrickSharedPreferences</code>ë¡œ ê³ ì¹œ ê²ƒì´ ì „ë¶€ì…ë‹ˆë‹¤.<br /></p>

<p>BrickSharedPreferencesë„ ê¸°ì¡´ì— ì‰ì–´ë“œí”„ë¦¬í¼ëŸ°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë˜ ê³³ì—ì„œ ë°ì´í„°ë¥¼ ì½ê³  ì“°ëŠ” ì½”ë“œëŠ” ë™ì¼í•˜ë¯€ë¡œ<br />
ë³„ë„ì˜ ì½”ë“œ ìˆ˜ì • ì—†ì´ ê¸°ì¡´ì— ì‚¬ìš©í•˜ì‹œë˜ ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.<br /><br />
<br /></p>

<h2 id="3-ê¸°ì¡´-ë°ì´í„°-ì´ê´€í•˜ê¸°">3. ê¸°ì¡´ ë°ì´í„° ì´ê´€í•˜ê¸°</h2>

<h4 id="ë‹¨-í•œì¤„ì´ë©´-ë©ë‹ˆë‹¤">ë‹¨ í•œì¤„ì´ë©´ ë©ë‹ˆë‹¤.</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì €ì¥ë˜ì–´ ìˆëŠ” ë°ì´í„°ë¥¼ ì „ë¶€ ì•”í˜¸í™”</span>
<span class="n">mSharedPreferences</span><span class="p">.</span><span class="nf">migrateEncryptedSharedPreferences</span><span class="p">()</span>
</code></pre></div></div>

<p>ìš”ê±° í•œì¤„ì´ë©´ í•´ê²°ë©ë‹ˆë‹¤.</p>

<p><img src="/assets/img/post/20210124_ma1.jpg" alt="sample_run" />
<br />
<img src="/assets/img/post/20210124_ma2.jpg" alt="sample_run" />
<br />
<img src="/assets/img/post/20210124_ma3.jpeg" alt="sample_run" />
<br />
<img src="/assets/img/post/20210124_ma4.jpeg" alt="sample_run" /></p>

<p><br /></p>

<p>ë‹¨, ë§Œì•½ SharedPreferencesë¥¼ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë‚˜ëˆ„ì–´ ì‚¬ìš©ì¤‘ì´ë¼ë©´<br />
ê°ê° íŒŒì¼ë³„ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ í˜¸ì¶œí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.<br /></p>

<p>ì´ê´€ ì‘ì—…ì€ ì•± ì‹¤í–‰ ì‹œ ë”± í•œë²ˆë§Œ í˜¸ì¶œí•´ì£¼ë©´ ë˜ê¸° ë•Œë¬¸ì— <br />
Application classì˜ onCreate() ì—ì„œ í˜¸ì¶œí•´ì£¼ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ìŠµë‹ˆë‹¤.<br /></p>

<p><br /><br /></p>

<h2 id="4-ì‹¤í–‰-ì˜ˆì œ">4. ì‹¤í–‰ ì˜ˆì œ</h2>

<p><img src="/assets/img/post/20210124_sample_run.gif" alt="sample_run" /></p>

<p><a href="https://github.com/HaenaraShin/BrickSharedPreference">BrickSharedPreferences ë ˆí¬ì§€í† ë¦¬</a>ì— ìì„¸í•˜ê²Œ ì„¤ëª…ë˜ì–´ ìˆìœ¼ë‹ˆ <br /></p>

<p>í•„ìš”í•˜ì‹œë‹¤ë©´ ìƒ˜í”Œ ì•±ê³¼ ì½”ë“œë¥¼ ì°¸ê³ í•´ë³´ì‹œëŠ” ê²ƒë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤ğŸ‘<br /></p>

<p><br /><br /><br /></p>

<h1 id="-ê²°ë¡ ">ğŸš€ ê²°ë¡ </h1>

<p>ëª¨ë°”ì¼ ë‹¨ë§ì— ì €ì¥í•˜ëŠ” ëª¨ë“  ë°ì´í„°ëŠ” ì•”í˜¸í™” í•´ì•¼í•©ë‹ˆë‹¤.<br />
BrickSharedPreferencesë¥¼ ì´ìš©í•´ì„œ ê°„í¸í•˜ê²Œ ë°ì´í„°ë¥¼ ì•”í˜¸í™” í•´ë³´ì„¸ìš”.<br />
ë§Œì•½ ìœ ìš©í•˜ê²Œ ì“°ì…¨ë‹¤ë©´ ê¹ƒí—™ì—ì„œ <strong>â­ï¸ìŠ¤íƒ€</strong>ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš” ğŸ‘<br /></p>

<h1 id="ë ˆí¼ëŸ°ìŠ¤">ë ˆí¼ëŸ°ìŠ¤</h1>

<ul>
  <li><a href="https://developer.android.com/reference/kotlin/androidx/security/crypto/EncryptedSharedPreferences">EncryptedSharedPreferences - êµ¬ê¸€ Android Developer</a></li>
  <li><a href="https://github.com/HaenaraShin/BrickSharedPreference">BrickSharedPreferences</a></li>
</ul>

<p><br /><br /></p>

    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <div class="meta">Share</div>
        
        <li>
            <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fandroid%2C%2Fsecurity%2F2021%2F01%2F24%2Fbrick.html" target="_blank" title=" Facebook">
			<i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Facebook</span>
		</a>
        </li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=%EC%BD%94%EB%93%9C+%ED%95%9C%EC%A4%84%EB%A1%9C+%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C+SharedPreference%EB%A5%BC+%EC%95%94%ED%98%B8%ED%99%94%ED%95%98%EB%8A%94+%EB%B0%A9%EB%B2%95%20http%3A%2F%2Flocalhost%3A4000%2Fandroid%2C%2Fsecurity%2F2021%2F01%2F24%2Fbrick.html" target="_blank" title="">
			<i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Tweet</span>
		</a>
        </li>
            
        <li>
            <a href="http://www.reddit.com/submit?url=http://localhost:4000/android,/security/2021/01/24/brick.html&title=%EC%BD%94%EB%93%9C+%ED%95%9C%EC%A4%84%EB%A1%9C+%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C+SharedPreference%EB%A5%BC+%EC%95%94%ED%98%B8%ED%99%94%ED%95%98%EB%8A%94+%EB%B0%A9%EB%B2%95%20%7C%20Androbin+Dev+Blog" target="_blank" title=" Reddit">
			<i class="fa fa-reddit-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Reddit</span>
		</a>
        </li>
           
        <li>
            <a href="mailto:?subject=%EC%BD%94%EB%93%9C+%ED%95%9C%EC%A4%84%EB%A1%9C+%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C+SharedPreference%EB%A5%BC+%EC%95%94%ED%98%B8%ED%99%94%ED%95%98%EB%8A%94+%EB%B0%A9%EB%B2%95%20%7C%20Androbin+Dev+Blog&body=:%20http://localhost:4000/android,/security/2021/01/24/brick.html" target="_blank" title="">
			<i class="fa fa-envelope-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Email</span>
		</a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


<footer>
  <div class="tag-list"></div>
</footer>


</article>

<!-- Disqus -->

<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'haenara';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view comments.</noscript>
</div>


<!-- Post navigation -->

  <div id="post-nav">
    
    <div id="previous-post">
        <a alt="[ë¼ë—´ì¹¼ëŸ¼] ë°±ë¶€ì¥ë‹˜ì˜ 2ê°€ì§€ ê°€ë¥´ì¹¨" href="/latte/2021/02/21/Latte_back.html">
            <p>Previous post</p>
            [ë¼ë—´ì¹¼ëŸ¼] ë°±ë¶€ì¥ë‹˜ì˜ 2ê°€ì§€ ê°€ë¥´ì¹¨
        </a>
    </div>
    

    
    <div id="next-post">
        <a alt="ì‹ í•´ë‚˜ë¼ì˜ 2020ë…„ íšŒê³ " href="/daily/2020/12/31/Reviewing_2020.html">
            <p>Next post</p>
            ì‹ í•´ë‚˜ë¼ì˜ 2020ë…„ íšŒê³ 
        </a>
    </div>
    
</div>



<!-- To change color of links in the page -->
<style>
  

  header#main {
    background-repeat:no-repeat;
   background-image: url('/assets/img/post/20210124_thumb.png');
  
  }
</style>

    </div>
    <footer class="site-footer">
    <p class="text">
        Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/sylhare/Type-on-Strap">Type on Strap</a>
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
    <a feed.xml href="/feed.xml"
       title="Follow RSS feed">
        <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>















<li>
    <a href="https://github.com/sylhare" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>
































                </ul>
            </div>
</footer>



  </body>
</html>
